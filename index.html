<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AgriAlister Pro v6.0</title>
    
    <!-- Link ke File CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Link ke Manifest (untuk install di HP) -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Meta untuk PWA (Tema warna status bar HP) -->
    <meta name="theme-color" content="#2e7d32">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>

<div id="app-container">

    <!-- HEADER DENGAN MENU ATAS -->
    <div class="topbar">
        <div style="width:100%; display:flex; justify-content:space-between; align-items:center;">
            <h2 style="font-size:1.4rem;">Agri Alister Pro</h2>
            <div class="user-wallet">üí∞ <span id="wallet-balance">0</span></div>
        </div>
        
        <!-- MENU NAVIGASI DI ATAS -->
        <div class="top-nav">
            <button class="nav-item active" onclick="nav.to('dashboard')" id="nav-dashboard">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">Home</span>
            </button>
            <button class="nav-item" onclick="nav.to('lahan')" id="nav-lahan">
                <span class="nav-icon">üå±</span>
                <span class="nav-label">Lahan</span>
            </button>
            <button class="nav-item" onclick="nav.to('katalog')" id="nav-katalog">
                <span class="nav-icon">üìñ</span>
                <span class="nav-label">Katalog</span>
            </button>
            <button class="nav-item" onclick="nav.to('alat')" id="nav-alat">
                <span class="nav-icon">‚öíÔ∏è</span>
                <span class="nav-label">Alat</span>
            </button>
            <button class="nav-item" onclick="nav.to('pengaturan')" id="nav-pengaturan">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-label">Menu</span>
            </button>
        </div>
    </div>

    <!-- DASHBOARD VIEW -->
    <div id="view-dashboard" class="view-section active">
        <!-- Weather Widget -->
        <div class="weather-card">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <div style="font-size: 2rem; font-weight: bold;">Cerah</div>
                    <div style="font-size: 0.8rem; opacity: 0.9;">Cocok untuk penyiangan & pemupukan</div>
                </div>
                <div style="font-size: 3rem;">‚òÄÔ∏è</div>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-val" id="dash-fields">0</div>
                <div class="stat-lbl">Lahan Aktif</div>
            </div>
            <div class="stat-card">
                <div class="stat-val" id="dash-expense">Rp 0</div>
                <div class="stat-lbl">Total Biaya</div>
            </div>
            <div class="stat-card">
                <div class="stat-val" id="dash-harvests">0</div>
                <div class="stat-lbl">Total Panen</div>
            </div>
        </div>

        <!-- Active Fields -->
        <div class="card">
            <div class="card-title">üå± Lahan Aktif</div>
            <div id="dashboard-fields"></div>
        </div>

        <!-- Recent Activities -->
        <div class="card">
            <div class="card-title">üìù Aktivitas Terakhir</div>
            <div id="activity-feed"></div>
        </div>
    </div>

    <!-- LAHAN VIEW -->
    <div id="view-lahan" class="view-section">
        <div class="card">
            <button class="btn btn-primary" onclick="modal.open('modal-field')">‚ûï Tambah Lahan Baru</button>
        </div>
        <div id="fields-list"></div>
    </div>

    <!-- KATALOG VIEW -->
    <div id="view-katalog" class="view-section">
        <input type="text" id="search-catalog" class="form-input" placeholder="üîç Cari tanaman..." style="margin-bottom:15px;" onkeyup="catalog.render()">
        <div id="catalog-list"></div>
        <div class="fab" onclick="modal.open('modal-plant')">+</div>
    </div>

    <!-- ALAT VIEW -->
    <div id="view-alat" class="view-section">
        <div class="tool-selector">
            <div class="tool-chip active" onclick="tools.setTab(0)">Benih</div>
            <div class="tool-chip" onclick="tools.setTab(1)">Pupuk</div>
            <div class="tool-chip" onclick="tools.setTab(2)">Obat HPT</div>
            <div class="tool-chip" onclick="tools.setTab(3)">NPK Calculator</div>
        </div>
        
        <!-- Benih Calculator -->
        <div id="tool-0" class="card">
            <h3>Kalkulator Kebutuhan Benih</h3>
            <div class="input-group">
                <label>Pilih Tanaman:</label>
                <select id="cb-t" class="form-input"></select>
            </div>
            <div class="input-group">
                <label>Luas Lahan (m¬≤):</label>
                <input type="number" id="cb-l" class="form-input" placeholder="Contoh: 1000">
            </div>
            <button class="btn btn-primary" onclick="tools.calcBenih()">Hitung Kebutuhan</button>
            <div id="res-benih" class="calc-result"></div>
        </div>

        <!-- Pupuk Calculator -->
        <div id="tool-1" class="card" style="display:none;">
            <h3>Kalkulator Kebutuhan Pupuk</h3>
            <div class="input-group">
                <label>Pilih Tanaman:</label>
                <select id="cp-t" class="form-input"></select>
            </div>
            <div class="input-group">
                <label>Luas Lahan (m¬≤):</label>
                <input type="number" id="cp-l" class="form-input">
            </div>
            <button class="btn btn-primary" onclick="tools.calcPupuk()">Hitung Kebutuhan</button>
            <div id="res-pupuk" class="calc-result"></div>
        </div>

        <!-- HPT Calculator -->
        <div id="tool-2" class="card" style="display:none;">
            <h3>Kalkulator Obat Hama & Penyakit</h3>
            <div class="input-group">
                <label>Volume Tangki (Liter):</label>
                <input type="number" id="ch-t" class="form-input" placeholder="Contoh: 15">
            </div>
            <div class="input-group">
                <label>Dosis Obat (ml/Liter air):</label>
                <input type="number" id="ch-d" class="form-input" placeholder="Contoh: 2">
            </div>
            <button class="btn btn-primary" onclick="tools.calcHPT()">Hitung Campuran</button>
            <div id="res-hpt" class="calc-result"></div>
        </div>

        <!-- NPK Calculator -->
        <div id="tool-3" class="card" style="display:none;">
            <h3>Kalkulator Kebutuhan NPK</h3>
            <div class="input-group">
                <label>Pilih Tanaman:</label>
                <select id="cn-t" class="form-input"></select>
            </div>
            <div class="input-group">
                <label>Luas Lahan (hektar):</label>
                <input type="number" id="cn-l" class="form-input" placeholder="Contoh: 1">
            </div>
            <button class="btn btn-primary" onclick="tools.calcNPK()">Hitung Kebutuhan NPK</button>
            <div id="res-npk" class="calc-result"></div>
        </div>
    </div>

    <!-- PENGATURAN VIEW -->
    <div id="view-pengaturan" class="view-section">
        <div class="card">
            <div class="card-title">‚öôÔ∏è Pengaturan Aplikasi</div>
            
            <div class="list-row">
                <div class="icon-box">üåô</div>
                <div class="text-box">
                    <div class="title">Tema Aplikasi</div>
                    <div class="sub">Ganti tampilan gelap/terang</div>
                </div>
                <button class="action-btn" onclick="app.toggleTheme()">Ganti Tema</button>
            </div>
            
            <div class="list-row">
                <div class="icon-box">üíæ</div>
                <div class="text-box">
                    <div class="title">Backup Data</div>
                    <div class="sub">Simpan data ke file JSON</div>
                </div>
                <button class="action-btn" onclick="dataMgr.backup()">Download</button>
            </div>
            
            <div class="list-row">
                <div class="icon-box">üìÇ</div>
                <div class="text-box">
                    <div class="title">Restore Data</div>
                    <div class="sub">Kembalikan data dari file</div>
                </div>
                <input type="file" id="restore-file" accept=".json" style="display:none" onchange="dataMgr.restore(this)">
                <button class="action-btn" onclick="document.getElementById('restore-file').click()">Upload</button>
            </div>

            <div class="list-row" style="margin-top:15px;">
                <div class="icon-box" style="background:rgba(231, 76, 60, 0.1);">‚ö†Ô∏è</div>
                <div class="text-box">
                    <div class="title" style="color:var(--danger)">Reset Aplikasi</div>
                    <div class="sub">Hapus semua data dan reset ke default</div>
                </div>
                <button class="action-btn" style="color:var(--danger)" onclick="app.resetApp()">Reset</button>
            </div>
        </div>
    </div>

</div>

<!-- MODAL: ADD FIELD -->
<div id="modal-field" class="modal">
    <div class="modal-box">
        <h3>üìù Tambah Lahan Baru</h3>
        <div class="input-group">
            <label>Nama Lahan / Blok</label>
            <input type="text" id="f-name" class="form-input" placeholder="Blok A Utama">
        </div>
        <div class="input-group">
            <label>Pilih Tanaman</label>
            <select id="f-plant" class="form-input"></select>
        </div>
        <div class="input-group">
            <label>Tanggal Tanam</label>
            <input type="date" id="f-date" class="form-input">
        </div>
        <div class="input-group">
            <label>Luas (m¬≤)</label>
            <input type="number" id="f-area" class="form-input" placeholder="1000">
        </div>
        <div class="input-group">
            <label>Jenis Biaya</label>
            <select id="f-type" class="form-input">
                <option value="seed">Bibit & Tanam</option>
                <option value="fert">Pupuk & Obat</option>
                <option value="labor">Gaji Tenaga</option>
                <option value="other">Lain-lain</option>
            </select>
        </div>
        <div class="input-group">
            <label>Biaya Awal (Rp)</label>
            <input type="number" id="f-cost" class="form-input" placeholder="500000">
        </div>
        <button class="btn btn-primary" onclick="app.addField()">Simpan Lahan</button>
        <button class="btn btn-outline" style="margin-top:10px;" onclick="modal.close()">Batal</button>
    </div>
</div>

<!-- MODAL: FIELD DETAILS -->
<div id="modal-detail" class="modal">
    <div class="modal-box">
        <div id="detail-header"></div>
        
        <div style="margin: 15px 0; padding:10px; background:var(--glass); border-radius:10px;">
            <h4 style="margin-bottom:10px;">üìÖ Jadwal Tanam</h4>
            <div id="d-timeline" class="timeline"></div>
        </div>

        <div style="margin: 15px 0; padding:10px; background:var(--glass); border-radius:10px;">
            <h4 style="margin-bottom:10px;">üìã Daftar Tugas</h4>
            <div id="task-list"></div>
            <div style="display:flex; gap:5px; margin-top:10px;">
                <input type="text" id="new-task-input" class="form-input" placeholder="Tambah tugas baru..." style="font-size:0.8rem; padding:8px;">
                <button class="btn btn-primary" style="width:auto; padding:8px 12px;" onclick="app.addTask()">‚ûï</button>
            </div>
        </div>

        <button class="btn btn-primary" onclick="app.initHarvest()">üåΩ Lakukan Panen</button>
        <button class="btn btn-outline" style="margin-top:10px;" onclick="modal.close()">Tutup</button>
    </div>
</div>

<!-- MODAL: PLANT INFO -->
<div id="modal-plant-info" class="modal">
    <div class="modal-box">
        <h3 id="pi-name">Nama Tanaman</h3>
        <p id="pi-desc" style="color:var(--text-muted); font-size:0.9rem; margin-bottom:15px;"></p>
        <div id="pi-timeline" style="margin-top:15px;"></div>
        <button class="btn btn-primary" style="margin-top:15px;" onclick="modal.close()">Tutup</button>
    </div>
</div>

<!-- MODAL: ADD PLANT -->
<div id="modal-plant" class="modal">
    <div class="modal-box">
        <h3>üå± Tambah Tanaman Baru</h3>
        <div class="input-group">
            <label>Nama Tanaman</label>
            <input type="text" id="p-name" class="form-input" placeholder="Contoh: Padi Ciherang">
        </div>
        <div class="input-group">
            <label>Harga Jual Estimasi (per Kg)</label>
            <input type="number" id="p-price" class="form-input" placeholder="10000">
        </div>
        <div class="input-group">
            <label>Hari Panen (HST)</label>
            <input type="number" id="p-days" class="form-input" placeholder="90">
        </div>
        <div class="input-group">
            <label>Kebutuhan Benih per m¬≤</label>
            <input type="number" id="p-seeds" class="form-input" placeholder="0.2" step="0.01">
        </div>
        <div class="input-group">
            <label>Kategori</label>
            <select id="p-cat" class="form-input">
                <option value="Pangan">Pangan</option>
                <option value="Sayur">Sayur</option>
                <option value="Buah">Buah</option>
                <option value="Pohon">Pohon</option>
            </select>
        </div>
        <button class="btn btn-primary" onclick="app.addPlant()">Simpan Tanaman</button>
        <button class="btn btn-outline" style="margin-top:10px;" onclick="modal.close()">Batal</button>
    </div>
</div>

<footer class="footer">
  <div class="footer-container">
    <div class="footer-brand">
      <h3>Agri Alister Pro</h3>
      <p>Solusi Cerdas Manajemen Pertanian & Agribisnis</p>
      <div class="footer-newsletter">
        <p>Berlangganan newsletter kami</p>
        <div class="newsletter-form">
          <input type="email" placeholder="Email Anda">
          <button type="submit">Subscribe</button>
        </div>
      </div>
    </div>

    <div class="footer-links">
      <h4>Fitur</h4>
      <ul>
        <li><a href="#"><i class="fas fa-tractor"></i> Manajemen Lahan</a></li>
        <li><a href="#"><i class="fas fa-clipboard-list"></i> Pencatatan Produksi</a></li>
        <li><a href="#"><i class="fas fa-chart-line"></i> Monitoring Harga</a></li>
        <li><a href="#"><i class="fas fa-file-chart-column"></i> Laporan & Analisis</a></li>
      </ul>
    </div>

    <div class="footer-links">
      <h4>Bantuan</h4>
      <ul>
        <li><a href="#"><i class="fas fa-question-circle"></i> Pusat Bantuan</a></li>
        <li><a href="#"><i class="fas fa-shield-alt"></i> Kebijakan Privasi</a></li>
        <li><a href="#"><i class="fas fa-file-contract"></i> Syarat & Ketentuan</a></li>
        <li><a href="#"><i class="fas fa-envelope"></i> Hubungi Kami</a></li>
      </ul>
    </div>
  </div>

  <div class="footer-bottom">
    <div class="footer-bottom-content">
      <p>¬© <span id="current-year"></span> Agri Alister Pro. All rights reserved.</p>
      <div class="footer-social">
        <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>
        <a href="#" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
      </div>
      <p class="version">Versi Aplikasi v1.0.0</p>
    </div>
  </div>
</footer>

<style>
  /* Reset dan Base Styles */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* Footer Styles */
  .footer {
    background: linear-gradient(135deg, #1a3526 0%, #1f3d2b 100%);
    color: #ffffff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding-top: 40px;
    margin-top: 60px;
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
  }

  .footer-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px 40px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 40px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .footer-brand h3 {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 10px;
    color: #ffffff;
    position: relative;
    display: inline-block;
  }

  .footer-brand h3:after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -5px;
    width: 60px;
    height: 3px;
    background: #8fd19e;
    border-radius: 2px;
  }

  .footer-brand > p {
    color: #d0e8d6;
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 25px;
    max-width: 300px;
  }

  .footer-newsletter {
    margin-top: 25px;
  }

  .footer-newsletter > p {
    color: #ffffff;
    font-weight: 500;
    margin-bottom: 12px;
    font-size: 0.95rem;
  }

  .newsletter-form {
    display: flex;
    max-width: 300px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .newsletter-form input {
    flex: 1;
    padding: 12px 15px;
    border: none;
    font-size: 0.9rem;
    background: #ffffff;
    color: #333;
  }

  .newsletter-form input:focus {
    outline: none;
  }

  .newsletter-form button {
    background: #8fd19e;
    color: #1f3d2b;
    border: none;
    padding: 0 20px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
  }

  .newsletter-form button:hover {
    background: #7cc48b;
  }

  .footer-links h4 {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 20px;
    color: #ffffff;
    position: relative;
    padding-bottom: 8px;
  }

  .footer-links h4:after {
    content: '';
    position: absolute;
    left: 0;
    bottom: 0;
    width: 40px;
    height: 2px;
    background: #8fd19e;
  }

  .footer-links ul {
    list-style: none;
  }

  .footer-links li {
    margin-bottom: 12px;
  }

  .footer-links a {
    color: #d0e8d6;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.95rem;
    transition: all 0.3s ease;
    padding: 5px 0;
  }

  .footer-links a:hover {
    color: #8fd19e;
    transform: translateX(5px);
  }

  .footer-links i {
    width: 20px;
    text-align: center;
    font-size: 0.9rem;
  }

  /* Footer Bottom Styles */
  .footer-bottom {
    background-color: #172a20;
    padding: 20px 0;
  }

  .footer-bottom-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
  }

  .footer-bottom p {
    color: #a3c9ad;
    font-size: 0.9rem;
  }

  .footer-social {
    display: flex;
    gap: 15px;
  }

  .footer-social a {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: rgba(255, 255, 255, 0.1);
    color: #ffffff;
    border-radius: 50%;
    text-decoration: none;
    transition: all 0.3s ease;
    font-size: 0.9rem;
  }

  .footer-social a:hover {
    background: #8fd19e;
    color: #1f3d2b;
    transform: translateY(-3px);
  }

  .version {
    background: rgba(143, 209, 158, 0.1);
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
    color: #8fd19e;
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .footer-container {
      grid-template-columns: 1fr;
      gap: 30px;
      text-align: center;
    }
    
    .footer-brand h3:after {
      left: 50%;
      transform: translateX(-50%);
    }
    
    .footer-links h4:after {
      left: 50%;
      transform: translateX(-50%);
    }
    
    .newsletter-form {
      margin: 0 auto;
    }
    
    .footer-links a:hover {
      transform: none;
    }
    
    .footer-bottom-content {
      flex-direction: column;
      text-align: center;
    }
    
    .footer-social {
      margin: 10px 0;
    }
  }

  @media (max-width: 480px) {
    .footer {
      padding-top: 30px;
    }
    
    .footer-container {
      padding: 0 15px 30px;
    }
    
    .footer-bottom-content {
      padding: 0 15px;
    }
  }
</style>

<script>
  // Auto update copyright year
  document.getElementById("current-year").textContent = new Date().getFullYear();
  
  // Tambahkan Font Awesome jika belum ada
  if (!document.querySelector('link[href*="font-awesome"]')) {
    const faLink = document.createElement('link');
    faLink.rel = 'stylesheet';
    faLink.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css';
    document.head.appendChild(faLink);
  }
  
  // Optional: Form submission handler
  document.querySelector('.newsletter-form button').addEventListener('click', function() {
    const emailInput = document.querySelector('.newsletter-form input');
    const email = emailInput.value;
    
    if (email && email.includes('@')) {
      alert('Terima kasih telah berlangganan newsletter Agri Alister Pro!');
      emailInput.value = '';
    } else {
      alert('Harap masukkan alamat email yang valid.');
      emailInput.focus();
    }
  });
</script>
</body>
</html>